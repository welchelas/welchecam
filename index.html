let streams = {};
let currentDeviceId = null;

async function getDevices() {
  const devices = await navigator.mediaDevices.enumerateDevices();
  return devices.filter(device => device.kind === 'videoinput');
}

async function startStreams() {
  const videoDevices = await getDevices();
  for (const device of videoDevices) {
    streams[device.deviceId] = await navigator.mediaDevices.getUserMedia({
      video: { deviceId: device.deviceId },
      audio: true
    });
  }
  // Empezar con el primer stream
  currentDeviceId = videoDevices[0].deviceId;
  video.srcObject = streams[currentDeviceId];
}

function switchCamera() {
  const keys = Object.keys(streams);
  const currentIndex = keys.indexOf(currentDeviceId);
  const nextIndex = (currentIndex + 1) % keys.length;
  currentDeviceId = keys[nextIndex];
  video.srcObject = streams[currentDeviceId];
}
